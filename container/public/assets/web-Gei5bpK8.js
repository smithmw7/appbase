import{W as t}from"./capacitor-app-DXliwX5I.js";var e,n={exports:{}};e=n,function(t,n){e.exports?e.exports=n():this.$script=n()}(0,function(){var t,e,n=document,i=n.getElementsByTagName("head")[0],o="push",r="readyState",a="onreadystatechange",l={},s={},u={};function p(t,e){for(var n=0,i=t.length;n<i;++n)if(!e(t[n]))return!1;return 1}function c(t,e){p(t,function(t){return e(t),1})}function d(e,n,i){e=e[o]?e:[e];var r=n&&n.call,a=r?n:i,h=r?e.join(""):n,v=e.length;function m(t){return t.call?t():l[t]}function g(){if(! --v)for(var t in l[h]=1,a&&a(),s)p(t.split("|"),m)&&!c(s[t],m)&&(s[t]=[])}return setTimeout(function(){c(e,function e(n,i){return null===n?g():(i||/^https?:\/\//.test(n)||!t||(n=-1===n.indexOf(".js")?t+n+".js":t+n),u[n]?2==u[n]?g():setTimeout(function(){e(n,!0)},0):(u[n]=1,void f(n,g)))})},0),d}function f(t,o){var l,s=n.createElement("script");s.onload=s.onerror=s[a]=function(){s[r]&&!/^c|loade/.test(s[r])||l||(s.onload=s[a]=null,l=1,u[t]=2,o())},s.async=1,s.src=e?t+(-1===t.indexOf("?")?"?":"&")+e:t,i.insertBefore(s,i.lastChild)}return d.get=f,d.order=function(t,e,n){!function i(o){o=t.shift(),t.length?d(o,i):d(o,e,n)}()},d.path=function(e){t=e},d.urlArgs=function(t){e=t},d.ready=function(t,e,n){t=t[o]?t:[t];var i,r=[];return!c(t,function(t){l[t]||r[o](t)})&&p(t,function(t){return l[t]})?e():(i=t.join("|"),s[i]=s[i]||[],s[i][o](e),n&&n(r)),d},d.done=function(t){d([null],t)},d});var i=n.exports;class o extends t{constructor(){super(...arguments),this.appleScriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.isAppleScriptLoaded=!1}async authorize(t){return new Promise((e,n)=>{t?this.loadSignInWithAppleJS().then(i=>{var o,r,a;this.isAppleScriptLoaded=i,this.isAppleScriptLoaded?(AppleID.auth.init({clientId:t.clientId,redirectURI:t.redirectURI,scope:null!==(o=t.scopes)&&void 0!==o?o:void 0,state:null!==(r=t.state)&&void 0!==r?r:void 0,nonce:null!==(a=t.nonce)&&void 0!==a?a:void 0,usePopup:!0}),AppleID.auth.signIn().then(t=>{var n,i,o,r,a;const l={response:{user:null,email:null===(n=t.user)||void 0===n?void 0:n.email,givenName:null===(o=null===(i=t.user)||void 0===i?void 0:i.name)||void 0===o?void 0:o.firstName,familyName:null===(a=null===(r=t.user)||void 0===r?void 0:r.name)||void 0===a?void 0:a.lastName,identityToken:t.authorization.id_token,authorizationCode:t.authorization.code}};e(l)}).catch(t=>{n(t)})):n("Unable to load Sign in with Apple JS framework.")}):n("No options were provided.")})}loadSignInWithAppleJS(){return new Promise(t=>{this.isAppleScriptLoaded?t(!0):void 0!==typeof window?i.get(this.appleScriptUrl,()=>t(!0)):t(!1)})}}export{o as SignInWithAppleWeb};
